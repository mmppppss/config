#! /bin/sh

# ======================
# Iniciar sxhkd y notificaciones
# ======================
killall sxhkd
sxhkd -c ~/.config/sxhkd/sxhkdrc &

killall notification-daemon
killall dunst
dunst -config ~/.config/dunst/dunstrc &

# ======================
# Teclado
# ======================
# setxkbmap es dvorak
# setxkbmap es

# ======================
# Monitores y escritorios
# ======================
bspc monitor -d 1 2 3 4 5 6 7 8 9 0

# ======================
# Configuración general bspwm
# ======================
bspc config top_padding 0
bspc config border_width         0
bspc config window_gap           8
bspc config split_ratio          0.52
bspc config borderless_monocle   true
bspc config gapless_monocle      true

# Colores de bordes (opcional)
# bspc config focused_border_color "#85CCFC"
# bspc config normal_border_color "#3498DB"

# ======================
# Reglas de aplicaciones
# ======================
bspc rule -a Gimp desktop='^8' state=floating follow=on
bspc rule -a mplayer2 state=floating
bspc rule -a Kupfer.py focus=on
bspc rule -a Screenkey manage=off
# bspc rule -a Chromium desktop='^2'

# ======================
# Input Devices
# ======================

#xinput set-prop 12 279 1 &

# ======================
# Apps de inicio (de tu i3 config)
# ======================

# Autenticación polkit
/usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 &

# Clipboard
xclip -selection clipboard &

# Touchpad tap click
synclient TapButton1=1 &

# Compositor (picom)
#picom -b --experimental-backends --backend glx --blur-method none --animations --animation-for-open-window zoom --vsync &
picom &

# Fondo de pantalla (tu script)
/bin/bash $HOME/.config/scripts/setWall.sh &

# Desactivar screen blanking y DPMS
xset s off &
xset -dpms &

# Network Manager Applet
nm-applet &

# ======================
# Barra (polybar)
# ======================
kill -9 $(pgrep -f 'polybar') >/dev/null 2>&1
polybar-msg cmd quit >/dev/null 2>&1
while pgrep -u $UID -x polybar >/dev/null; do sleep 1; done
polybar -c ~/.config/polybar/config.ini &

# ======================
# Extras
# ======================

# Fondo alternativo con feh (fallback)
/usr/bin/feh --bg-fill ~/background.* &


xsetroot -cursor_name left_ptr
